#  Alembic Migration Guide: Add `exported` and `exported_date` to Project Table

## 1.  Login to the Server  



## 2.  Enter the Docker Container

```bash
docker exec -it <container_id_or_name> bash
```
> Replace `<container_id_or_name>` with the appropriate container running your FastAPI app.

## 3.  Navigate to the App Directory

```bash
cd /path/to/your/app
```

## 4. Initialize Alembic (if not already done)
```bash
alembic init alembic
```

## 5.  Configure `alembic.ini`
Open the file and update the SQLAlchemy URL:
```ini
sqlalchemy.url = postgresql+psycopg2://user:password@host:port/dbname
```
Replace with your actual username ,password and dbname

## 6.  Update `env.py`
Open `alembic/env.py` and modify the metadata line:
```python
from database import Base  # Make sure the import path is correct
target_metadata = Base.metadata
```

## 7.  Generate Migration Script
Run:
```bash
alembic revision --autogenerate -m "Add exported and exported_date to project"
```

## 8.  Modify the Generated Migration File
Navigate to `alembic/versions/` and open the newly created file.  
Make sure it looks like this:
```python
def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('project', sa.Column('exported', sa.Boolean(), nullable=False, server_default=sa.text('false')))
    op.add_column('project', sa.Column('exported_date', sa.DateTime(), nullable=True))
    # ### end Alembic commands ###

def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column('project', 'exported_date')
    op.drop_column('project', 'exported')
    # ### end Alembic commands ###
```

>  If `server_default=sa.text('false')` is missing, add it manually to ensure a default value.

## 9.  Apply the Migration
```bash
alembic upgrade head
```
